---
import { Image } from "astro:assets";
import {
  sillon,
  salaDeEspera,
  esterilizacion,
  instrumentos,
  ultrasonido,
  radiografia,
} from "../images";
---

<div class="w-full">
  <section id="galeria" class="py-16 sm:py-24 px-4 sm:px-8 max-w-7xl mx-auto">
    <h2
      class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-primary text-center mb-12 sm:mb-16"
    >
      Galería
    </h2>
    <div
      class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8"
    >
      <div class="overflow-hidden rounded-xl shadow-md">
        <Image
          class="zoom w-full h-full object-cover aspect-[4/3]"
          src={sillon}
          width={800}
          height={600}
          title="Sillón dental"
          alt="Moderno sillón dental equipado con la última tecnología"
        />
      </div>

      <div class="overflow-hidden rounded-xl shadow-md">
        <Image
          class="zoom w-full h-full object-cover aspect-[4/3]"
          src={salaDeEspera}
          width={800}
          height={600}
          title="Sala de espera"
          alt="Confortable sala de espera con ambiente acogedor"
        />
      </div>

      <div class="overflow-hidden rounded-xl shadow-md">
        <Image
          class="zoom w-full h-full object-cover aspect-[4/3]"
          src={esterilizacion}
          width={800}
          height={600}
          title="Sala de esterilización"
          alt="Moderna sala de esterilización con equipos de última generación"
        />
      </div>

      <div class="overflow-hidden rounded-xl shadow-md">
        <Image
          class="zoom w-full h-full object-cover aspect-[4/3]"
          src={instrumentos}
          width={800}
          height={600}
          title="Instrumentos dentales"
          alt="Instrumentos dentales de precisión esterilizados"
        />
      </div>

      <div class="overflow-hidden rounded-xl shadow-md">
        <Image
          class="zoom w-full h-full object-cover aspect-[4/3]"
          src={ultrasonido}
          width={800}
          height={600}
          title="Equipo de ultrasonido"
          alt="Equipo de ultrasonido para diagnóstico dental avanzado"
        />
      </div>

      <div class="overflow-hidden rounded-xl shadow-md">
        <Image
          class="zoom w-full h-full object-cover aspect-[4/3]"
          src={radiografia}
          width={800}
          height={600}
          title="Equipo de radiografía"
          alt="Equipo de radiografía digital para diagnóstico preciso"
        />
      </div>
    </div>
  </section>
</div>

<style>
  .zoom {
    transition: all 0.5s ease;
  }

  .zoom:hover {
    transform: scale(1.1);
  }

  .zoom-animation {
    animation: zoomEffect 1s ease;
  }

  @keyframes zoomEffect {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.2);
    }
    100% {
      transform: scale(1);
    }
  }
</style>

<script>
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const images = entry.target.querySelectorAll(".zoom");
          images.forEach((img, index) => {
            setTimeout(() => {
              img.classList.add("zoom-animation");
              setTimeout(() => {
                img.classList.remove("zoom-animation");
              }, 1000);
            }, index * 200);
          });
          observer.unobserve(entry.target);
        }
      });
    },
    {
      threshold: 0.2,
      rootMargin: "50px",
    }
  );

  const gallery = document.getElementById("galeria");
  if (gallery) {
    observer.observe(gallery);
  }
</script>
